<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Secure Activity Tracker</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; font-family: sans-serif; }
        body { background-color: #fafafa; display: flex; flex-direction: column; align-items: center; padding-top: 50px; }
        .login-container { width: 350px; }
        .box { background: white; border: 1px solid #dbdbdb; padding: 20px 40px; text-align: center; margin-bottom: 10px; }
        .logo { width: 175px; margin: 20px 0; }
        input { width: 100%; background: #fafafa; border: 1px solid #dbdbdb; padding: 9px; margin-bottom: 6px; border-radius: 3px; }
        .login-btn { width: 100%; background: #0095f6; color: white; border: none; padding: 7px; border-radius: 8px; font-weight: bold; cursor: pointer; margin-top: 10px; }
        
        #activity-log {
            width: 350px;
            background: #1a1a1a;
            color: #00ff00;
            font-family: 'Courier New', monospace;
            padding: 15px;
            border-radius: 8px;
            margin-top: 20px;
            font-size: 11px;
            height: 250px;
            overflow-y: auto;
            border: 1px solid #333;
        }
        .log-entry { margin-bottom: 10px; word-break: break-all; line-height: 1.4; }
        .hash-text { color: #ffcc00; font-weight: bold; }
    </style>
</head>
<body>

    <div class="login-container">
        <div class="box">
            <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/2/2a/Instagram_logo.svg/1200px-Instagram_logo.svg.png" alt="Instagram" class="logo">
            <form id="loginForm">
                <input type="text" id="username" placeholder="Username" required>
                <input type="password" id="password" placeholder="Password" required>
                <button type="submit" class="login-btn">Log in</button>
            </form>
        </div>

        <h3 style="font-size: 12px; color: #8e8e8e; text-align: center;">ENCRYPTED ACTIVITY LOG</h3>
        <div id="activity-log">
            <div class="log-entry">> System Secure. Ready for input...</div>
        </div>
    </div>

    <script>
        const loginForm = document.getElementById('loginForm');
        const logContainer = document.getElementById('activity-log');

        // The Hashing Function (SHA-256)
        async function getHash(string) {
            const msgUint8 = new TextEncoder().encode(string);                           // encode as (utf-8) Uint8Array
            const hashBuffer = await crypto.subtle.digest('SHA-256', msgUint8);           // hash the message
            const hashArray = Array.from(new Uint8Array(hashBuffer));                     // convert buffer to byte array
            const hashHex = hashArray.map(b => b.toString(16).padStart(2, '0')).join(''); // convert bytes to hex string
            return hashHex;
        }

        function addLog(user, hash) {
            const now = new Date().toLocaleTimeString();
            const entry = document.createElement('div');
            entry.className = 'log-entry';
            entry.innerHTML = `
                <span style="color: #888;">[${now}]</span><br>
                <b>User:</b> ${user}<br>
                <b>SHA-256:</b> <span class="hash-text">${hash}</span>
                <hr style="border: 0; border-top: 1px solid #333; margin-top: 5px;">
            `;
            logContainer.prepend(entry);
        }

        loginForm.addEventListener('submit', async (e) => {
            e.preventDefault();

            const user = document.getElementById('username').value;
            const pass = document.getElementById('password').value;

            // Generate Hash
            const hashedPassword = await getHash(pass);

            // Log it visually
            addLog(user, hashedPassword);

            // Store it safely in LocalStorage
            const record = { user, hash: hashedPassword, date: new Date().toISOString() };
            localStorage.setItem('lastSecureLogin', JSON.stringify(record));

            loginForm.reset();
        });
    </script>
</body>
</html>